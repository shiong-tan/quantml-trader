# =====================================================
# QuantML-Trader Environment Configuration Template
# =====================================================
#
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
#

# =====================================================
# TRADING MODE
# =====================================================
# Trading mode: 'backtest', 'paper', or 'live'
# CRITICAL: Start with 'paper' and validate for 4+ weeks before 'live'
TRADING_MODE=backtest

# =====================================================
# INTERACTIVE BROKERS API CONFIGURATION (Phase 2+)
# =====================================================
# IB Gateway/TWS connection settings
IB_HOST=127.0.0.1
IB_PORT=7497  # 7497 for paper trading, 7496 for live trading
IB_CLIENT_ID=1

# IB Account credentials
IB_ACCOUNT_ID=your_account_id_here

# Paper trading account (for testing)
IB_PAPER_ACCOUNT_ID=your_paper_account_id_here

# Connection timeout (seconds)
IB_TIMEOUT=10

# Reconnection settings
IB_RECONNECT_ENABLED=true
IB_RECONNECT_ATTEMPTS=5
IB_RECONNECT_DELAY=60

# =====================================================
# DATA PATHS
# =====================================================
# Directory for storing historical data
DATA_DIR=./data

# Directory for storing trained models
MODELS_DIR=./models

# Directory for storing backtest results
BACKTEST_RESULTS_DIR=./results/backtests

# Directory for storing paper trading results
PAPER_RESULTS_DIR=./results/paper_trading

# Directory for storing live trading logs
LIVE_RESULTS_DIR=./results/live_trading

# Directory for plots and visualizations
PLOTS_DIR=./plots

# =====================================================
# LOGGING CONFIGURATION
# =====================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path
LOG_FILE=./logs/quantml_trader.log

# Log rotation settings
LOG_MAX_BYTES=10485760  # 10MB
LOG_BACKUP_COUNT=5

# Trade log file (separate from application logs)
TRADE_LOG_FILE=./logs/trades.log

# =====================================================
# RISK MANAGEMENT (Production Settings)
# =====================================================
# Maximum position size as fraction of portfolio
MAX_POSITION_SIZE=0.2

# Maximum portfolio leverage
MAX_LEVERAGE=1.0

# Stop loss percentage (e.g., 0.02 = 2%)
STOP_LOSS_PERCENT=0.02

# Maximum drawdown threshold (halt trading if exceeded)
MAX_DRAWDOWN_PERCENT=0.15

# Daily loss limit (halt trading if exceeded)
DAILY_LOSS_LIMIT_PERCENT=0.05

# Position concentration limit (max in single symbol)
MAX_SYMBOL_CONCENTRATION=0.3

# =====================================================
# TRADING PARAMETERS
# =====================================================
# Default trading symbols (comma-separated)
TRADING_SYMBOLS=AAPL,MSFT,GOOGL,AMZN,TSLA

# Trading frequency: 'daily', 'hourly', '15min', '5min'
TRADING_FREQUENCY=daily

# Slippage model: 'fixed', 'percentage', 'volume_based'
SLIPPAGE_MODEL=percentage
SLIPPAGE_VALUE=0.001  # 0.1% slippage

# Commission model: 'fixed', 'percentage'
COMMISSION_MODEL=fixed
COMMISSION_VALUE=1.0  # $1 per trade

# =====================================================
# MODEL CONFIGURATION
# =====================================================
# Model type: 'random_forest', 'xgboost', 'lightgbm', 'ensemble'
MODEL_TYPE=random_forest

# Feature engineering settings
LOOKBACK_PERIOD=20
MIN_TRAINING_SAMPLES=1000

# Model retraining frequency (days)
RETRAIN_FREQUENCY=30

# Model validation split
VALIDATION_SPLIT=0.2

# =====================================================
# BACKTESTING CONFIGURATION
# =====================================================
# Backtest start date (YYYY-MM-DD)
BACKTEST_START_DATE=2020-01-01

# Backtest end date (YYYY-MM-DD)
BACKTEST_END_DATE=2023-12-31

# Initial capital for backtesting
BACKTEST_INITIAL_CAPITAL=100000

# =====================================================
# PAPER TRADING CONFIGURATION (Phase 3-4)
# =====================================================
# Paper trading initial capital
PAPER_INITIAL_CAPITAL=100000

# Paper trading validation period (days)
PAPER_VALIDATION_DAYS=28  # Minimum 4 weeks

# Auto-halt on poor performance
PAPER_AUTO_HALT_ENABLED=true
PAPER_HALT_LOSS_THRESHOLD=0.10  # 10% loss

# =====================================================
# LIVE TRADING CONFIGURATION (Phase 6)
# =====================================================
# Live trading initial capital (start small!)
LIVE_INITIAL_CAPITAL=10000

# Require manual confirmation for orders
LIVE_REQUIRE_CONFIRMATION=true

# Emergency kill switch enabled
EMERGENCY_KILL_SWITCH_ENABLED=true

# =====================================================
# MONITORING & ALERTS
# =====================================================
# Enable monitoring dashboard
MONITORING_ENABLED=true
MONITORING_PORT=8050

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL=60

# Alert system: 'email', 'slack', 'telegram', 'none'
ALERT_SYSTEM=none

# Email alerts (if enabled)
EMAIL_SMTP_SERVER=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_FROM=your_email@example.com
EMAIL_TO=your_email@example.com
EMAIL_PASSWORD=your_app_password_here

# Slack webhook (if enabled)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Telegram bot (if enabled)
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_telegram_chat_id

# =====================================================
# SAFETY FEATURES
# =====================================================
# Circuit breaker: pause trading on extreme market moves
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_THRESHOLD=0.05  # 5% market move

# Order validation before submission
ORDER_VALIDATION_ENABLED=true

# Dry run mode: log orders without submitting
DRY_RUN_MODE=false

# Maximum orders per day (safety limit)
MAX_ORDERS_PER_DAY=100

# =====================================================
# PERFORMANCE TRACKING
# =====================================================
# Enable performance metrics collection
METRICS_ENABLED=true

# Metrics export format: 'csv', 'json', 'parquet'
METRICS_EXPORT_FORMAT=csv

# Metrics export interval (seconds)
METRICS_EXPORT_INTERVAL=3600  # 1 hour

# =====================================================
# DEVELOPMENT & DEBUGGING
# =====================================================
# Enable debug mode (verbose logging, extra checks)
DEBUG_MODE=false

# Enable profiling (performance measurement)
PROFILING_ENABLED=false

# Enable test mode (uses mock data)
TEST_MODE=false

# Random seed for reproducibility
RANDOM_SEED=42

# =====================================================
# EXTERNAL DATA SOURCES (Future)
# =====================================================
# Alpha Vantage API key
ALPHA_VANTAGE_API_KEY=your_api_key_here

# Quandl API key
QUANDL_API_KEY=your_api_key_here

# Yahoo Finance (usually no key needed)
YAHOO_FINANCE_ENABLED=true

# =====================================================
# DATABASE CONFIGURATION (Future)
# =====================================================
# Database type: 'sqlite', 'postgresql', 'mysql'
DATABASE_TYPE=sqlite

# SQLite database path
SQLITE_DB_PATH=./data/quantml_trader.db

# PostgreSQL connection (if using PostgreSQL)
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DB=quantml_trader
# POSTGRES_USER=your_username
# POSTGRES_PASSWORD=your_password

# =====================================================
# DOCKER & DEPLOYMENT (Phase 5)
# =====================================================
# Container deployment settings
DOCKER_ENABLED=false
CONTAINER_NAME=quantml-trader

# Health check endpoint
HEALTH_CHECK_PATH=/health

# Graceful shutdown timeout (seconds)
SHUTDOWN_TIMEOUT=30
